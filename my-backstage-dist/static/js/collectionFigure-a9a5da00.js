import{af as K,f as R,v as Q,y as W,M as g,K as X,aE as Z,aF as ee,aG as ae,aH as te,aI as oe,aJ as le,o as c,l as i,n as u,a as n,w as s,u as o,F as y,p as x,c as C,ao as ne,s as q,C as se,t as d,ah as re,ag as ce,ai as ue,aj as de,an as ie}from"./vendors-d86bafeb.js";import{_ as pe,g as _e,a as me,b as ge}from"./index-419f057c.js";const fe={class:"page-container"},be={class:"form-card"},ve={key:0,class:"box-card"},ye=["onClick"],xe={class:"card-header"},he={class:"text item"},ke={class:"text item"},Ce={class:"text item"},ze={class:"text item"},Ee={class:"text item"},Ve={class:"text item"},De={class:"text item"},Fe={__name:"collectionFigure",setup(qe){const h=K().proxy,S=R(),Y=Q();W(()=>{let l=document.querySelector(".form-card"),t=document.querySelector(".el-tabs"),_=document.querySelector(".el-pagination");t.style.height=`calc(100% - ${l.offsetHeight}px - ${_.offsetHeight}px)`});const b=[];S.state.business.allArea.forEach(l=>{b.push(l)});const z=g([]);function E(l){_e({areacd:l}).then(t=>{z.value=t.datas})}E(b[0].areacd);const O=g([{label:"\u5168\u90E8",value:"0"},{label:"\u6B63\u5E38",value:"1"},{label:"\u5F02\u5E38",value:"2"}]),e=X({areacd:b[0].areacd,orgcd:"",stime:h.$dayjs().subtract(1,"day").format("YYYY-MM-DD"),abnormal:"0",page:1,pagesize:10}),V=g(0),w=(l,t)=>{e.areacd=l.props.name,E(l.props.name),p()},k=g([]),v=g(!0);async function p(){let l=h.$Long(new Date),t=h.$md5(e+l),_={req:e,sign:t,sendTime:l};try{const{datas:m,totalcnt:f}=await me(_);k.value=m,V.value=f,m.length>0?v.value=!0:v.value=!1}catch(m){k.value=[],v.value=!1}}const D=g(null);function B(){D._value.resetFields(),e.page=1,e.pagesize=10,e.abnormal="0",p()}function M(l,t){Y.push({name:"collectionLedgerDetail",query:{orgcd:l,abnormal:t,stime:e.stime}})}const T=l=>{e.pagesize=l,p()},U=l=>{e.page=l,p()};return p(),(l,t)=>{const _=Z,m=ee,f=re,$=ce,F=ue,j=ge,I=de,L=ae,H=te,N=oe,P=le,A=ie;return c(),i("div",fe,[u("div",be,[n(I,{model:o(e),ref_key:"elform",ref:D,inline:!0,"label-position":"left"},{default:s(()=>[n(f,{label:"\u673A\u6784\u540D\u79F0:",prop:"orgcd"},{default:s(()=>[n(m,{modelValue:o(e).orgcd,"onUpdate:modelValue":t[0]||(t[0]=a=>o(e).orgcd=a),placeholder:"\u8BF7\u9009\u62E9\u673A\u6784\u540D\u79F0"},{default:s(()=>[(c(!0),i(y,null,x(o(z),a=>(c(),C(_,{key:a.orgcd,label:a.orgnm,value:a.orgcd},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(f,{label:"\u67E5\u8BE2\u65E5\u671F:",prop:"stime"},{default:s(()=>[n($,{modelValue:o(e).stime,"onUpdate:modelValue":t[1]||(t[1]=a=>o(e).stime=a),type:"date","value-format":"YYYY-MM-DD",placeholder:"\u8BF7\u9009\u62E9\u65E5\u671F",size:"default"},null,8,["modelValue"])]),_:1}),n(f,{label:"\u5F02\u5E38\u6807\u5FD7:",prop:"abnormal"},{default:s(()=>[n(m,{modelValue:o(e).abnormal,"onUpdate:modelValue":t[2]||(t[2]=a=>o(e).abnormal=a),placeholder:"\u8BF7\u9009\u62E9\u5F02\u5E38\u6807\u5FD7"},{default:s(()=>[(c(!0),i(y,null,x(o(O),a=>(c(),C(_,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(F,{type:"primary",icon:o(ne),onClick:p},{default:s(()=>[q("\u67E5\u8BE2")]),_:1},8,["icon"]),n(F,{style:{width:"80px"},onClick:B},{default:s(()=>[n(j,{class:"custom-icon"}),q("\xA0\u91CD\u7F6E")]),_:1})]),_:1},8,["model"])]),n(P,{class:"system-scrollbar",type:"border-card",modelValue:o(e).areacd,"onUpdate:modelValue":t[3]||(t[3]=a=>o(e).areacd=a),onTabClick:w},{default:s(()=>[(c(),i(y,null,x(b,(a,G)=>n(N,{key:G,label:a.areanm,name:a.areacd},{default:s(()=>[o(v)?(c(),i("div",ve,[(c(!0),i(y,null,x(o(k),(r,J)=>(c(),i("div",{key:J,onClick:Se=>M(r.orgcd,r.abnormal)},[n(L,{class:se({abnormal:r.abnormal==2})},{header:s(()=>[u("div",xe,[u("span",null,d(r.orgnm),1)])]),default:s(()=>[u("div",he,"\u5E94\u4F20\u8868\u5355\u6570\uFF1A"+d(r.tabcnt1),1),u("div",ke,"\u5B9E\u4F20\u8868\u5355\u6570\uFF1A"+d(r.tancnt2),1),u("div",Ce,"\u533B\u9662\u4E0A\u62A5\u6570\u636E\u91CF\uFF1A"+d(r.hosnum),1),u("div",ze,"\u524D\u7F6E\u673A\u6570\u636E\u91CF\uFF1A"+d(r.qzjnum),1),u("div",Ee,"\u4E91\u524D\u7F6E\u673A\u5E93\u6570\u636E\u91CF\uFF1A"+d(r.yqznum1),1),u("div",Ve,"\u4E2D\u5FC3\u5E93\u6570\u636E\u91CF\uFF1A"+d(r.corenum),1),u("div",De,"\u5171\u4EAB\u5E93\u6570\u636E\u91CF\uFF1A"+d(r.sharenum),1)]),_:2},1032,["class"])],8,ye))),128))])):(c(),C(H,{key:1,description:"\u6682\u65E0\u6570\u636E"}))]),_:2},1032,["label","name"])),64))]),_:1},8,["modelValue"]),n(A,{"current-page":o(e).page,"onUpdate:current-page":t[4]||(t[4]=a=>o(e).page=a),"page-size":o(e).pagesize,"onUpdate:page-size":t[5]||(t[5]=a=>o(e).pagesize=a),"page-sizes":[10,20,30],background:!0,layout:"total, sizes, prev, pager, next, jumper",total:o(V),onSizeChange:T,onCurrentChange:U},null,8,["current-page","page-size","total"])])}}},we=pe(Fe,[["__scopeId","data-v-6d0f40a0"]]);export{we as default};
